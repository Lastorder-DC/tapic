
/**
* Twitch API & Chat in javascript.
* @author Skhmt
* @license MIT
* @version 5.1.0
*
* @module TAPIC
*/

/* jshint
  esversion: 6,
  node: true
*/

var __nodeModule__;
if (typeof module == 'object') __nodeModule__ = module;

var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(d,f,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");d!=Array.prototype&&d!=Object.prototype&&(d[f]=c.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var f=0;return $jscomp.iteratorPrototype(function(){return f<d.length?{done:!1,value:d[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();var f=d[Symbol.iterator];return f?f.call(d):$jscomp.arrayIterator(d)};$jscomp.owns=function(d,f){return Object.prototype.hasOwnProperty.call(d,f)};
$jscomp.polyfill=function(d,f,c,a){if(f){c=$jscomp.global;d=d.split(".");for(a=0;a<d.length-1;a++){var e=d[a];e in c||(c[e]={});c=c[e]}d=d[d.length-1];a=c[d];f=f(a);f!=a&&null!=f&&$jscomp.defineProperty(c,d,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("WeakMap",function(d){function f(b){$jscomp.owns(b,a)||$jscomp.defineProperty(b,a,{value:{}})}function c(a){var b=Object[a];b&&(Object[a]=function(a){f(a);return b(a)})}if(function(){if(!d||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),c=new d([[a,2],[b,3]]);if(2!=c.get(a)||3!=c.get(b))return!1;c.delete(a);c.set(b,4);return!c.has(a)&&4==c.get(b)}catch(q){return!1}}())return d;var a="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var e=0,b=function(a){this.id_=(e+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};b.prototype.set=function(b,c){f(b);if(!$jscomp.owns(b,a))throw Error("WeakMap key fail: "+b);b[a][this.id_]=c;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:void 0};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype.delete=
function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)?delete b[a][this.id_]:!1};return b},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(d){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!d||!d.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new d($jscomp.makeIterator([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var c=b.entries(),e=c.next();if(e.done||e.value[0]!=a||"s"!=e.value[1])return!1;e=c.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!c.next().done?!1:!0}catch(n){return!1}}())return d;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var f=new WeakMap,c=function(a){this.data_={};this.head_=b();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};c.prototype.set=function(b,c){var e=a(this,b);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=c:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,value:c},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};c.prototype.delete=
function(b){b=a(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=b();this.size=0};c.prototype.has=function(b){return!!a(this,b).entry};c.prototype.get=function(b){return(b=a(this,b).entry)&&b.value};c.prototype.entries=function(){return e(this,function(b){return[b.key,
b.value]})};c.prototype.keys=function(){return e(this,function(b){return b.key})};c.prototype.values=function(){return e(this,function(b){return b.value})};c.prototype.forEach=function(b,a){for(var c=this.entries(),e;!(e=c.next()).done;)e=e.value,b.call(a,e[1],e[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var a=function(b,a){var c;c=a&&typeof a;"object"==c||"function"==c?f.has(a)?c=f.get(a):(c=""+ ++h,f.set(a,c)):c="p_"+a;var e=b.data_[c];if(e&&$jscomp.owns(b.data_,c))for(b=0;b<e.length;b++){var d=
e[b];if(a!==a&&d.key!==d.key||a===d.key)return{id:c,list:e,index:b,entry:d}}return{id:c,list:e,index:-1,entry:void 0}},e=function(b,a){var c=b.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=b.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:a(c)};c=null}return{done:!0,value:void 0}})},b=function(){var b={};return b.previous=b.next=b.head=b},h=0;return c},"es6-impl","es3");
(function(d){function f(a){if(c[a])return c[a].exports;var e=c[a]={exports:{},id:a,loaded:!1};d[a].call(e.exports,e,e.exports,f);e.loaded=!0;return e.exports}var c={};f.m=d;f.c=c;f.p="";return f(0)})([function(d,f,c){d.exports=c(1)},function(d,f,c){function a(){var a={},b=c(3),h,d=c(4)(a),g=c(5)(b),f=c(7)(b,d),l=c(8)(b,d,g),n=c(9)(b,g);a.setup=function(e,m){"string"!==typeof e||0===e.length?console.error("Invalid parameters. Usage: TAPIC.setup(oauth[, callback]);"):(b.oauth=e.replace("oauth:",""),
b.startTime=Date.now(),g("https://api.twitch.tv/kraken",function(e){e.error&&"Bad Request"===e.error?console.error("Invalid Client ID or Oauth token."):(b.username=e.token.user_name,b.id=e.token.user_id,b.clientid=e.token.client_id,h=c(2)?new (c(10))("wss://irc-ws.chat.twitch.tv:443"):new WebSocket("wss://irc-ws.chat.twitch.tv:443"),c(11)(b,h,f,d,m),c(12)(b,d),c(13)(a,b,h,n,l,g),c(14)(a,b,h,d),c(15)(a,h,d),c(16)(a,g),c(17)(a,b,g),c(18)(a,b),c(19)(a,b),c(20)(a,b,g),c(21)(a,b,g),c(22)(a,b,g),c(23)(a,
g),c(24)(a,b),c(25)(a,g),c(26)(a,b))}))};c(27);return a}c(2)?__nodeModule__.exports=a():window.TAPIC=a()},function(d,f){d.exports="object"!==typeof window||"object"===typeof nw},function(d,f){d.exports={refreshRate:5,clientid:"",oauth:"",username:"",channel:"",channel_id:"",id:"",online:"",game:"",status:"",followerCount:"",totalViewCount:"",currentViewCount:"",partner:"",fps:"",videoHeight:"",delay:"",preview:"",subBadgeUrl:"",chatters:{},followers:{},createdAt:"",logo:"",videoBanner:"",profileBanner:"",
userDisplayName:"",userColor:"",userEmoteSets:"",userMod:"",userSub:"",userTurbo:"",userType:"",community:{name:"",description:"",descriptionHTML:"",rules:"",rulesHTML:"",summary:""},teamDisplayName:"",teamName:"",startTime:0}},function(d,f){d.exports=function(c){function a(a,c){if(e.has(a)){a=e.get(a);for(var b=0;b<a.length;b++)a[b](c)}}var e=new Map;c.listen=function(a,c){if("string"!=typeof a)console.error("Invalid parameters. Usage: TAPIC.listen(eventName[, callback]);");else{if("function"!==
typeof c)return console.error("Callback needed.");if(e.has(a)){var b=e.get(a);b.push(c);e.set(a,b)}else e.set(a,[c])}};c.emit=function(b,c){"string"!=typeof b?console.error("Invalid parameters. Usage: TAPIC.emit(eventName, eventDetail);"):a(b,c)};return a}},function(d,f,c){d.exports=function(a){return function(e,b,d){var h=setTimeout(function(){return d({error:"Request timeout after 5 seconds."})},5E3),g=e+("?oauth_token\x3d"+a.oauth)+"\x26api_version\x3d5";a.clientid&&(g+="\x26client_id\x3d"+a.clientid);
"string"===typeof b?g+=b:"function"===typeof b&&(d=b);if("function"!==typeof d)return console.error("Callback needed.");if(c(2))c(6).get(g,function(a){var b="";a.setEncoding("utf8");a.on("data",function(a){b+=a});a.on("end",function(){if(204===a.statusCode)return clearTimeout(h),d(b);if(200<=a.statusCode&&400>a.statusCode)try{return clearTimeout(h),d(JSON.parse(b))}catch(p){return clearTimeout(h),console.error(p+"@"+e)}else return clearTimeout(h),console.error(b+"@"+e)})}).on("error",function(a){clearTimeout(h);
return console.error(a.message+"@"+e)});else{var f;do f="tapicJSONP"+Math.floor(1E9*Math.random());while(window[f]);window[f]=function(a){clearTimeout(h);delete window[f];return d(a)};b=document.createElement("script");b.id=f;b.src=g+"\x26callback\x3d"+f;b.onerror=function(a){};try{document.getElementById("tapicJsonpContainer").appendChild(b)}catch(l){g=document.createElement("div"),g.id="tapicJsonpContainer",g.style.cssText="display:none;",document.getElementsByTagName("body")[0].appendChild(g),
g.appendChild(b)}}}}},function(d,f){d.exports=require("https")},function(d,f){d.exports=function(c,a){function e(a){var b=new Map;a=a.substring(1).split(";");for(var c=0;c<a.length;c++){var e=a[c].split("\x3d");b.set(e[0],e[1])}b.has("badges")&&(a=b.get("badges"),b.set("badges",a.split(",")));return b}return function(b){a("raw",b);var d=b.split(" ");if("PRIVMSG"===d[2]){b=e(d[0]);b.get("display-name")||b.set("display-name",d[1].split("!")[0].substring(1));b.get("color")||b.set("color","#d2691e");
var f=!1,d=d.slice(4);d[0]=d[0].substring(1);"\u0001ACTION"===d[0]&&(d=d.slice(1),f=!0);d=d.join(" ").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");a("message",{from:b.get("display-name"),color:b.get("color"),mod:-1!==b.get("badges").indexOf("admin")||-1!==b.get("badges").indexOf("broadcaster")||-1!==b.get("badges").indexOf("global_mod")||-1!==b.get("badges").indexOf("moderator")||-1!==b.get("badges").indexOf("staff"),sub:-1!==b.get("badges").indexOf("subscriber")||-1!==b.get("badges").indexOf("founder"),
founder:-1!==b.get("badges").indexOf("founder"),turbo:-1!==b.get("badges").indexOf("turbo"),streamer:b.get("display-name").toLowerCase()===c.channel.toLowerCase(),action:f,text:d,emotes:b.get("emotes"),badges:b.get("badges"),room_id:b.get("room-id"),user_id:b.get("user-id"),bits:b.get("bits")})}else if("PRIVMSG"===d[1])a("host",d[3].substring(1));else if("NOTICE"===d[2])d.splice(0,4),b=d.join(" ").substring(1),a("notice",b);else if("JOIN"===d[1])b=d[0].split("!")[0].substring(1),a("join",b);else if("PART"===
d[1])b=d[0].split("!")[0].substring(1),a("part",b);else if("ROOMSTATE"===d[2])b=e(d[0]),a("roomstate",{lang:b.get("broadcaster-lang"),r9k:b.get("r9k"),slow:b.get("slow"),subs_only:b.get("subs-only")});else if("WHISPER"===d[2])b=e(d[0]),b.get("display-name")||b.set("display-name",d[1].split("!")[0].substring(1)),b.get("color")||b.set("color","#d2691e"),f=d.slice(4).join(" ").substring(1),a("whisper",{from:b.get("display-name"),to:d[3],color:b.get("color"),emotes:b.get("emotes"),turbo:1==b.get("turbo"),
message_id:b.get("message-id"),thread_id:b.get("thread-id"),user_id:b.get("user-id"),text:f,badges:b.get("badges")});else if("CLEARCHAT"===d[2])3===d.length?a("clearChat"):(f=e(d[0]),b=f.get("ban-reason"),"string"===typeof b&&(b=b.replace(/\\s/g," ")),f=f.get("ban-duration"),"undefined"===typeof f&&(f=0),a("clearUser",{name:d[4].slice(1),reason:b,duration:f}));else if("USERSTATE"===d[2])b=e(d[0]),c.userColor=b.get("color"),c.userDisplayName=b.get("display-name"),c.userEmoteSets=b.get("emote-sets"),
c.userMod=b.get("mod"),c.userSub=b.get("subscriber"),c.userTurbo=b.get("turbo"),c.userType=b.get("user-type");else if("USERNOTICE"===d[2]){b=e(d[0]);var d=d.slice(4).join(" ").substring(1),f=b.get("msg-param-months"),g=b.get("display-name"),q="resub"==b.get("msg-id"),l=b.get("msg-param-sub-plan"),n=b.get("msg-param-sub-plan-name"),p=b.get("system-msg"),r=b.get("user-id"),k=b.get("user-type");b=b.get("room-id");a("sub",{name:g,user_id:r,user_type:k,room_id:b,months:f,resub:q,plan:l,planName:n,sysMsg:p,
joinedText:d})}}}},function(d,f,c){d.exports=function(a,d,b){function e(f){a.channel_id&&(b("https://api.twitch.tv/kraken/streams/"+a.channel_id,function(b){b.stream?(a.online=!0,a.currentViewCount=b.stream.viewers,a.fps=b.stream.average_fps,a.videoHeight=b.stream.video_height,a.delay=b.stream.delay,a.preview=b.stream.preview.large):a.online=!1}),b("https://api.twitch.tv/kraken/channels/"+a.channel_id,function(b){a.game=b.game;a.status=b.status;a.followerCount=b.followers;a.totalViewCount=b.views;
a.partner=b.partner;a.createdAt=b.created_at;a.logo=b.logo;a.videoBanner=b.video_banner;a.profileBanner=b.profile_banner}),a.community.name="",a.community.description="",a.community.descriptionHTML="",a.community.rules="",a.community.rulesHTML="",a.community.summary="",b("https://api.twitch.tv/kraken/channels/"+a.channel_id+"/follows","\x26limit\x3d100",function(b){if(b.follows){var c=!0;0<a.followers.length&&(c=!1);for(var e=0;e<b.follows.length;e++){var f=b.follows[e].user.display_name;-1===a.followers.indexOf(f)&&
(c||d("follow",f),a.followers.push(f))}}}),b("https://tmi.twitch.tv/group/user/"+a.channel+"/chatters",function(b){c(2)||(b=b.data);b&&b.chatters&&(a.currentViewCount=b.chatter_count,a.chatters.moderators=b.chatters.moderators.slice(),a.chatters.staff=b.chatters.staff.slice(),a.chatters.admins=b.chatters.admins.slice(),a.chatters.global_mods=b.chatters.global_mods.slice(),a.chatters.viewers=b.chatters.viewers.slice())}),setTimeout(function(){c(2)||(document.getElementById("tapicJsonpContainer").innerHTML=
"");e()},1E3*a.refreshRate))}return e}},function(d,f){d.exports=function(c,a){return function(d){a("https://api.twitch.tv/kraken/chat/"+c.channel_id+"/badges",function(a){a.subscriber&&(c.subBadgeUrl=a.subscriber.image);"function"==typeof d&&d()})}}},function(d,f){d.exports=require("ws")},function(d,f,c){d.exports=function(a,d,b,f,m){function e(){f("dev","chat - connected successfully");d.send("CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership");d.send("PASS oauth:"+a.oauth);d.send("NICK "+
a.username)}function h(e){e=c(2)?e.split("\r\n"):e.data.split("\r\n");for(var h=0;h<e.length;h++){var g=e[h];"PING :tmi.twitch.tv"===g?(f("dev","chat - PONG sent"),d.send("PONG :tmi.twitch.tv")):g&&(b(g),":tmi.twitch.tv 001"===g.substring(0,18)&&"function"==typeof m&&m(a.username))}}c(2)?(d.on("open",e),d.on("message",h)):(d.onopen=e,d.onmessage=h)}},function(d,f,c){d.exports=function(a,d){function b(){clearTimeout(u);clearTimeout(t);"object"===typeof k&&(1!==k.readyState&&0!==k.readyState||n());
c(2)?(k=new (c(10))("wss://pubsub-edge.twitch.tv"),k.on("open",e),k.on("message",p),k.on("close",f),k.on("error",g)):(k=new WebSocket("wss://pubsub-edge.twitch.tv"),k.onopen=e,k.onmessage=p,k.onclose=f,k.onerror=g)}function e(){d("dev","pubsub - connected successfully");l(JSON.stringify({type:"LISTEN",nonce:"listenToTopics",data:{topics:["channel-bits-events-v1."+a.channel_id,"chat_moderator_actions."+a.id+"."+a.channel_id,"whispers."+a.id],auth_token:a.oauth}}));q()}function f(){d("dev","pubsub - reconnect: psClose()");
b()}function g(a){console.error("pubsub error");console.error(a)}function q(){l('{"type":"PING"}');d("dev","pubsub - PING sent");u=setTimeout(q,6E4);t=setTimeout(function(){d("dev","pubsub - reconnect: ping() - pong timeout");b()},1E4)}function l(a){switch(k.readyState){case 0:setTimeout(function(){l(a)},1E3);break;case 2:case 3:d("dev","pubsub - reconnect: send() - closing/closed state");b();setTimeout(function(){l(a)},2E3);break;case 1:try{k.send(a)}catch(v){console.error(v),setTimeout(function(){l(a)},
1500)}}}function n(){if(c(2))k.on("close",function(){});else k.onclose=function(){};k.close()}function p(a){a=c(2)?JSON.parse(a):JSON.parse(a.data);switch(a.type){case "PONG":d("dev","pubsub - PONG received");clearTimeout(t);break;case "RESPONSE":break;case "RECONNECT":d("dev","pubsub - reconnect: psMessage() - was sent RECONNECT message");b();break;case "MESSAGE":r(a.data);break;default:d("dev","pubsub uncaught message type:"+a)}}function r(b){function c(){var a=JSON.parse(b.message);d("bits",a)}
function e(){var a=JSON.parse(b.message).data;d("moderation",a)}switch(b.topic){case "channel-bits-events-v1."+a.channel_id:c();break;case "chat_moderator_actions."+a.id+"."+a.id:e();break;case "whispers."+a.id:JSON.parse(b.message)}}var k,t,u;b()}},function(d,f){d.exports=function(c,a,d,b,f,m){c.joinChannel=function(c,e){if("string"!=typeof c)return console.error("Invalid parameters. Usage: TAPIC.joinChannel(channel);");if(!d)return console.error("Tapic not setup.");a.channel&&d.send("PART #"+a.channel);
m("https://api.twitch.tv/kraken/users","\x26login\x3d"+encodeURIComponent(c),function(h){a.channel_id=h.users[0]._id;a.channel=c.replace("#","");a.online=!1;a.game="";a.status="";a.followerCount="";a.totalViewCount="";a.partner="";a.currentViewCount="";a.fps="";a.videoHeight="";a.delay="";a.subBadgeUrl="";a.chatters={};a.followers=[];a.createdAt="";a.logo="";a.videoBanner="";a.profileBanner="";a.userMod="";a.userSub="";a.userTurbo="";a.userType="";d.send("JOIN #"+a.channel);b();"function"==typeof e?
f(e):f()})}}},function(d,f){d.exports=function(c,a,d,b){c.sendChat=function(c){if("string"!=typeof c)console.error("Invalid parameters. Usage: TAPIC.sendChat(message);");else{if(!d)return console.error("Tapic not setup.");d.send("PRIVMSG #"+a.channel+" :"+c);b("echoChat",c)}}}},function(d,f){d.exports=function(c,a,d){c.sendWhisper=function(b,c){if("string"!=typeof b||"string"!=typeof c)console.error("Invalid parameters. Usage: TAPIC.sendWhisper(user, message);");else{if(!a)return console.error("Tapic not setup.");
a.send("PRIVMSG #jtv :/w "+b+" "+c);d("echoWhisper",{to:b,text:c})}}}},function(d,f){d.exports=function(c,a){c.isFollowing=function(c,b,d){if("string"!=typeof c||"string"!=typeof b||"function"!=typeof d)return console.error("Invalid parameters. Usage: TAPIC.isFollowing(user_id, channel_id, callback);");c="https://api.twitch.tv/kraken/users/"+encodeURIComponent(c)+"/follows/channels/"+encodeURIComponent(b);a(c,function(a){a&&a.created_at?d({isFollowing:!0,dateFollowed:(new Date(a.created_at)).toLocaleString()}):
d({isFollowing:!1})})}}},function(d,f){d.exports=function(c,a,d){c.isSubscribing=function(b,c){"string"!=typeof b||"function"!=typeof c?console.error("Invalid parameters. Usage: TAPIC.isSubscribing(user_id, callback);"):(b="https://api.twitch.tv/kraken/channels/"+a.channel_id+"/subscriptions/"+encodeURIComponent(b),d(b,function(a){a.error?c({isSubscribing:!1}):c({isSubscribing:!0,dateSubscribed:(new Date(a.created_at)).toLocaleString(),sub_plan:a.sub_plan,sub_plan_name:a.sub_plan_name})}))}}},function(d,
f){d.exports=function(c,a){c.getUsername=function(){return a.username};c.getChannel=function(){return a.channel};c.getUserID=function(){return a.id};c.getChannelID=function(){return a.channel_id};c.isOnline=function(){return a.channel?a.online:console.error("Not in a channel.")};c.getStatus=function(){return a.channel?a.status:console.error("Not in a channel.")};c.getGame=function(){return a.channel?a.game:console.error("Not in a channel.")};c.getFollowerCount=function(){return a.channel?a.followerCount:
console.error("Not in a channel.")};c.getTotalViewCount=function(){return a.channel?a.totalViewCount:console.error("Not in a channel.")};c.isPartner=function(){return a.channel?a.partner:console.error("Not in a channel.")};c.getCurrentViewCount=function(){return a.channel?a.currentViewCount:console.error("Not in a channel.")};c.getFps=function(){return a.online?a.fps:console.error("Stream not online.")};c.getVideoHeight=function(){return a.online?a.videoHeight:console.error("Stream not online.")};
c.getDelay=function(){return a.online?a.delay:console.error("Stream not online.")};c.getSubBadgeUrl=function(){return a.channel?a.subBadgeUrl:console.error("Not in a channel.")};c.getChatters=function(){return a.channel?a.chatters:console.error("Not in a channel.")};c.getCreatedAt=function(){return a.channel?a.createdAt:console.error("Not in a channel.")};c.getLogo=function(){return a.channel?a.logo:console.error("Not in a channel.")};c.getVideoBanner=function(){return a.channel?a.videoBanner:console.error("Not in a channel.")};
c.getProfileBanner=function(){return a.channel?a.profileBanner:console.error("Not in a channel.")};c.getDisplayName=function(){return a.channel?a.userDisplayName:console.error("Not in a channel.")};c.getColor=function(){return a.channel?a.userColor:console.error("Not in a channel.")};c.getEmoteSets=function(){return a.channel?a.userEmoteSets:console.error("Not in a channel.")};c.getMod=function(){return a.channel?1==a.userMod:console.error("Not in a channel.")};c.getSub=function(){return a.channel?
1==a.userSub:console.error("Not in a channel.")};c.getTurbo=function(){return a.channel?1==a.userTurbo:console.error("Not in a channel.")};c.getUserType=function(){return a.channel?a.userType:console.error("Not in a channel.")};c.getOauth=function(){return a.oauth};c.getClientID=function(){return a.clientid};c.getPreview=function(){return a.preview};c.getCommunityName=function(){return a.community.name};c.getCommunityDescription=function(){return a.community.description};c.getCommunityDescriptionHTML=
function(){return a.community.descriptionHTML};c.getCommunityRules=function(){return a.community.rules};c.getCommunityRulesHTML=function(){return a.community.rulesHTML};c.getCommunitySummary=function(){return a.community.summary};c.getTeamName=function(){return a.teamName};c.getTeamDisplayName=function(){return a.teamDisplayName}}},function(d,f,c){d.exports=function(a,d){a.runCommercial=function(a){if("number"!=typeof a)console.error("Invalid parameters. Usage: TAPIC.runCommercial(length);");else{if(!d.channel)return console.error("Not in a channel.");
if(!d.partner)return console.error("Not a partner, cannot run a commercial.");var b="/kraken/channels/"+d.channel_id+"/commercial?oauth_token\x3d"+d.oauth,e="https://api.twitch.tv"+b;c(2)?(e={host:"https://api.twitch.tv",path:b,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset\x3dUTF-8","Client-ID":d.clientid}},c(6).request(e).write({duration:a}).end()):(b=new XMLHttpRequest,b.open("POST",e,!0),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset\x3dUTF-8"),
b.setRequestHeader("Client-ID",d.clientid),b.send({duration:a}))}}}},function(d,f){d.exports=function(c,a,d){c.setStatusGame=function(b,c){"string"!=typeof b||"string"!=typeof c?console.error("Invalid parameters. Usage: TAPIC.setStatusGame(status, game);"):d("https://api.twitch.tv/kraken/channels/"+a.channel_id,"\x26_method\x3dput\x26channel[status]\x3d"+encodeURIComponent(b)+"\x26channel[game]\x3d"+encodeURIComponent(c),function(b){a.game=b.game;a.status=b.status})}}},function(d,f){d.exports=function(c,
a,d){c.joinCommunity=function(a){if("string"!=typeof a)return console.error("Invalid parameter. Usage: TAPIC.joinCommunity(community);");d("https://api.twitch.tv/kraken/communities/","\x26name\x3d"+encodeURIComponent(a),function(a){})}}},function(d,f){d.exports=function(c,a,d){c.leaveCommunity=function(){}}},function(d,f){d.exports=function(c,a){c.findID=function(c,b){if("string"!=typeof c||"function"!=typeof b)return console.error("Invalid parameters. Usage: TAPIC.findID(username, callback);");a("https://api.twitch.tv/kraken/users",
"\x26login\x3d"+encodeURIComponent(c),function(a){b(a.users[0]._id)})}}},function(d,f){d.exports=function(c,a){c.setRefreshRate=function(c){if("number"!=typeof c)return console.error("Invalid parameter. Usage: TAPIC.setRefreshRate(refreshRate);");5<=c&&(a.refreshRate=c)}}},function(d,f){d.exports=function(c,a){c.kraken=function(c,b,d){if("string"===typeof c&&"string"===typeof b&&"function"===typeof d)a("https://api.twitch.tv/kraken/"+c,b,function(a){d(a)});else if("string"===typeof c&&"function"===
typeof b)a("https://api.twitch.tv/kraken/"+c,function(a){b(a)});else return console.error("Invalid parameters. Usage: TAPIC.kraken(path, [params,] callback);")}}},function(d,f){d.exports=function(c,a){c.getTapicUptime=function(){var c=Date.now()-a.startTime,b=c/1E3,d=b/60;return{total:c,seconds:b%60|0,minutes:d%60|0,hours:d/60|0}}}},function(d,f){}]);