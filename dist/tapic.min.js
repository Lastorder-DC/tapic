
/**
* Twitch API & Chat in javascript.
* @author Skhmt
* @license MIT
* @version 4.0.0
*
* @module TAPIC
*/

/* jshint
  esversion: 6,
  node: true
*/

var __nodeModule__;
if (typeof module == 'object') __nodeModule__ = module;

var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(d,e,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");d!=Array.prototype&&d!=Object.prototype&&(d[e]=c.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var e=0;return $jscomp.iteratorPrototype(function(){return e<d.length?{done:!1,value:d[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();var e=d[Symbol.iterator];return e?e.call(d):$jscomp.arrayIterator(d)};$jscomp.owns=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)};
$jscomp.polyfill=function(d,e,c,a){if(e){c=$jscomp.global;d=d.split(".");for(a=0;a<d.length-1;a++){var g=d[a];g in c||(c[g]={});c=c[g]}d=d[d.length-1];a=c[d];e=e(a);e!=a&&null!=e&&$jscomp.defineProperty(c,d,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("WeakMap",function(d){function e(b){$jscomp.owns(b,a)||$jscomp.defineProperty(b,a,{value:{}})}function c(a){var b=Object[a];b&&(Object[a]=function(a){e(a);return b(a)})}if(function(){if(!d||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),c=new d([[a,2],[b,3]]);if(2!=c.get(a)||3!=c.get(b))return!1;c.delete(a);c.set(b,4);return!c.has(a)&&4==c.get(b)}catch(k){return!1}}())return d;var a="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var g=0,b=function(a){this.id_=(g+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};b.prototype.set=function(b,c){e(b);if(!$jscomp.owns(b,a))throw Error("WeakMap key fail: "+b);b[a][this.id_]=c;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:void 0};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype.delete=
function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)?delete b[a][this.id_]:!1};return b},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(d){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!d||!d.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new d($jscomp.makeIterator([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var c=b.entries(),f=c.next();if(f.done||f.value[0]!=a||"s"!=f.value[1])return!1;f=c.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!c.next().done?!1:!0}catch(m){return!1}}())return d;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var e=new WeakMap,c=function(a){this.data_={};this.head_=b();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};c.prototype.set=function(b,c){var f=a(this,b);f.list||(f.list=this.data_[f.id]=[]);f.entry?f.entry.value=c:(f.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,value:c},f.list.push(f.entry),this.head_.previous.next=f.entry,this.head_.previous=f.entry,this.size++);return this};c.prototype.delete=
function(b){b=a(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=b();this.size=0};c.prototype.has=function(b){return!!a(this,b).entry};c.prototype.get=function(b){return(b=a(this,b).entry)&&b.value};c.prototype.entries=function(){return g(this,function(a){return[a.key,
a.value]})};c.prototype.keys=function(){return g(this,function(a){return a.key})};c.prototype.values=function(){return g(this,function(a){return a.value})};c.prototype.forEach=function(a,b){for(var c=this.entries(),f;!(f=c.next()).done;)f=f.value,a.call(b,f[1],f[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var a=function(a,b){var c;c=b&&typeof b;"object"==c||"function"==c?e.has(b)?c=e.get(b):(c=""+ ++f,e.set(b,c)):c="p_"+b;var g=a.data_[c];if(g&&$jscomp.owns(a.data_,c))for(a=0;a<g.length;a++){var d=
g[a];if(b!==b&&d.key!==d.key||b===d.key)return{id:c,list:g,index:a,entry:d}}return{id:c,list:g,index:-1,entry:void 0}},g=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},b=function(){var a={};return a.previous=a.next=a.head=a},f=0;return c},"es6-impl","es3");
(function(d){function e(a){if(c[a])return c[a].exports;var g=c[a]={exports:{},id:a,loaded:!1};d[a].call(g.exports,g,g.exports,e);g.loaded=!0;return g.exports}var c={};e.m=d;e.c=c;e.p="";return e(0)})([function(d,e,c){d.exports=c(1)},function(d,e,c){function a(){var a={},b=c(3),f,d=c(4)(a),e=c(5)(b),k=c(7)(b,d),h=c(8)(b,d,e),m=c(9)(b,e);a.setup=function(g,l){"string"!==typeof g||0===g.length?console.error("Invalid parameters. Usage: TAPIC.setup(oauth[, callback]);"):(b.oauth=g.replace("oauth:",""),
e("https://api.twitch.tv/kraken",function(g){g.error&&"Bad Request"===g.error?console.error("Invalid Client ID or Oauth token."):(b.username=g.token.user_name,b.id=g.token.user_id,b.clientid=g.token.client_id,f=c(2)?new (c(10))("wss://irc-ws.chat.twitch.tv:443"):new WebSocket("wss://irc-ws.chat.twitch.tv:443"),c(11)(b,f,k,l),c(12)(b,d),c(13)(a,b,f,m,h,e),c(14)(a,b,f,d),c(15)(a,f,d),c(16)(a,e),c(17)(a,b,e),c(18)(a,b),c(19)(a,b),c(20)(a,b,e),c(21)(a,b,e),c(22)(a,b,e),c(23)(a,e),c(24)(a,b),c(25)(a,e))}))};
c(26);return a}c(2)?__nodeModule__.exports=a():window.TAPIC=a()},function(d,e){d.exports="object"!==typeof window||"object"===typeof nw},function(d,e){d.exports={refreshRate:5,clientid:"",oauth:"",username:"",channel:"",channel_id:"",id:"",online:"",game:"",status:"",followerCount:"",totalViewCount:"",currentViewCount:"",partner:"",fps:"",videoHeight:"",delay:"",preview:"",subBadgeUrl:"",chatters:{},followers:{},createdAt:"",logo:"",videoBanner:"",profileBanner:"",userDisplayName:"",userColor:"",
userEmoteSets:"",userMod:"",userSub:"",userTurbo:"",userType:"",community:{name:"",description:"",descriptionHTML:"",rules:"",rulesHTML:"",summary:""},teamDisplayName:"",teamName:""}},function(d,e){d.exports=function(c){function a(a,c){if(d.has(a)){a=d.get(a);for(var b=0;b<a.length;b++)a[b](c)}}var d=new Map;c.listen=function(a,c){if("string"!=typeof a)console.error("Invalid parameters. Usage: TAPIC.listen(eventName[, callback]);");else{if("function"!==typeof c)return console.error("Callback needed.");
if(d.has(a)){var b=d.get(a);b.push(c);d.set(a,b)}else d.set(a,[c])}};c.emit=function(b,c){"string"!=typeof b||"string"!=typeof c?console.error("Invalid parameters. Usage: TAPIC.emit(eventName, eventDetail);"):a(b,c)};return a}},function(d,e,c){d.exports=function(a){return function(d,b,f){var g=setTimeout(function(){return f("")},4E3),e=d+("?oauth_token\x3d"+a.oauth)+"\x26api_version\x3d5";a.clientid&&(e+="\x26client_id\x3d"+a.clientid);"string"===typeof b?e+=b:"function"===typeof b&&(f=b);if("function"!==
typeof f)return console.error("Callback needed.");if(c(2))c(6).get(e,function(a){var b="";a.setEncoding("utf8");a.on("data",function(a){b+=a});a.on("end",function(){if(204===a.statusCode)return clearTimeout(g),f(b);if(200<=a.statusCode&&400>a.statusCode)try{return clearTimeout(g),f(JSON.parse(b))}catch(n){return clearTimeout(g),console.error(n+"@"+d)}else return clearTimeout(g),console.error(b+"@"+d)})}).on("error",function(a){clearTimeout(g);return console.error(a.message+"@"+d)});else{var k;do k=
"tapicJSONP"+Math.floor(1E9*Math.random());while(window[k]);window[k]=function(a){clearTimeout(g);delete window[k];return f(a)};b=document.createElement("script");b.id=k;b.src=e+"\x26callback\x3d"+k;try{document.getElementById("tapicJsonpContainer").appendChild(b)}catch(h){e=document.createElement("div"),e.id="tapicJsonpContainer",e.style.cssText="display:none;",document.getElementsByTagName("body")[0].appendChild(e),e.appendChild(b)}}}}},function(d,e){d.exports=require("https")},function(d,e){d.exports=
function(c,a){function d(a){var b=new Map;a=a.substring(1).split(";");for(var c=0;c<a.length;c++){var d=a[c].split("\x3d");b.set(d[0],d[1])}b.has("badges")&&(a=b.get("badges"),b.set("badges",a.split(",")));return b}return function(b){a("raw",b);b=b.split(" ");if("PRIVMSG"===b[2]){var f=d(b[0]);f.get("display-name")||f.set("display-name",b[1].split("!")[0].substring(1));f.get("color")||f.set("color","#d2691e");var g=!1;b=b.slice(4);b[0]=b[0].substring(1);"\u0001ACTION"===b[0]&&(b=b.slice(1),g=!0);
var e=b.join(" ").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");"twitchnotify"===f.get("display-name")?"subscribed!"===b[2]?a("sub",b[0]):"subscribed"===b[2]?a("subPrime",b[0]):"resubscribed"===b[2]&&a("subsAway",b[0]):a("message",{from:f.get("display-name"),color:f.get("color"),mod:1==f.get("mod"),sub:1==f.get("subscriber"),turbo:1==f.get("turbo"),streamer:f.get("display-name").toLowerCase()===c.channel.toLowerCase(),action:g,text:e,emotes:f.get("emotes"),badges:f.get("badges"),room_id:f.get("room-id"),
user_id:f.get("user-id"),bits:f.get("bits")})}else"PRIVMSG"===b[1]?a("host",b[3].substring(1)):"NOTICE"===b[2]?(b.splice(0,4),b=b.join(" ").substring(1),a("notice",b)):"JOIN"===b[1]?(b=b[0].split("!")[0].substring(1),a("join",b)):"PART"===b[1]?(b=b[0].split("!")[0].substring(1),a("part",b)):"ROOMSTATE"===b[2]?(b=d(b[0]),a("roomstate",{lang:b.get("broadcaster-lang"),r9k:b.get("r9k"),slow:b.get("slow"),subs_only:b.get("subs-only")})):"WHISPER"===b[2]?(f=d(b[0]),f.get("display-name")||f.set("display-name",
b[1].split("!")[0].substring(1)),f.get("color")||f.set("color","#d2691e"),g=b.slice(4).join(" ").substring(1),a("whisper",{from:f.get("display-name"),to:b[3],color:f.get("color"),emotes:f.get("emotes"),turbo:1==f.get("turbo"),message_id:f.get("message-id"),thread_id:f.get("thread-id"),user_id:f.get("user-id"),text:g,badges:f.get("badges")})):"CLEARCHAT"===b[2]?3===b.length?a("clearChat"):(g=d(b[0]),f=g.get("ban-reason"),"string"===typeof f&&(f=f.replace(/\\s/g," ")),g=g.get("ban-duration"),"undefined"===
typeof g&&(g=0),a("clearUser",{name:b[4].slice(1),reason:f,duration:g})):"USERSTATE"===b[2]?(b=d(b[0]),c.userColor=b.get("color"),c.userDisplayName=b.get("display-name"),c.userEmoteSets=b.get("emote-sets"),c.userMod=b.get("mod"),c.userSub=b.get("subscriber"),c.userTurbo=b.get("turbo"),c.userType=b.get("user-type")):"USERNOTICE"===b[2]&&(f=d(b[0]),b=b.slice(4).join(" ").substring(1),a("subMonths",{name:f.get("display-name"),months:f.get("msg-param-months"),message:b}))}}},function(d,e,c){d.exports=
function(a,d,b){function f(g){function e(){l&&h&&m&&n&&p&&q&&("function"===typeof g&&g(),d("update"))}if(a.channel_id){var l=!1,h=!1,m=!1,n=!1,p=!1,q=!1;b("https://api.twitch.tv/kraken/streams/"+a.channel_id,function(b){b.stream?(a.online=!0,a.currentViewCount=b.stream.viewers,a.fps=b.stream.average_fps,a.videoHeight=b.stream.video_height,a.delay=b.stream.delay,a.preview=b.stream.preview.large):a.online=!1;l=!0;e()});b("https://api.twitch.tv/kraken/channels/"+a.channel_id,function(b){a.game=b.game;
a.status=b.status;a.followerCount=b.followers;a.totalViewCount=b.views;a.partner=b.partner;a.createdAt=b.created_at;a.logo=b.logo;a.videoBanner=b.video_banner;a.profileBanner=b.profile_banner;h=!0;e()});b("https://api.twitch.tv/kraken/channels/"+a.channel_id+"/community",function(b){b?(a.community.name=b.name,a.community.description=b.rescription,a.community.descriptionHTML=b.description_html,a.community.rules=b.rules,a.community.rulesHTML=b.rules_html,a.community.summary=b.summary):(a.community.name=
"",a.community.description="",a.community.descriptionHTML="",a.community.rules="",a.community.rulesHTML="",a.community.summary="");p=!0;e()});b("https://api.twitch.tv/kraken/channels/"+a.channel_id+"/follows","\x26limit\x3d100",function(b){if(b.follows){var c=!0;0<a.followers.length&&(c=!1);for(var f=0;f<b.follows.length;f++){var g=b.follows[f].user.display_name;-1===a.followers.indexOf(g)&&(c||d("follow",g),a.followers.push(g))}m=!0;e()}});b("https://tmi.twitch.tv/group/user/"+a.channel+"/chatters",
function(b){c(2)||(b=b.data);b&&b.chatters&&(a.currentViewCount=b.chatter_count,a.chatters.moderators=b.chatters.moderators.slice(),a.chatters.staff=b.chatters.staff.slice(),a.chatters.admins=b.chatters.admins.slice(),a.chatters.global_mods=b.chatters.global_mods.slice(),a.chatters.viewers=b.chatters.viewers.slice(),n=!0,e())});b("https://api.twitch.tv/kraken/channels/"+a.channel_id+"/teams",function(b){"undefined"!==typeof b.teams[0]?(a.teamDisplayName=b.teams[0].display_name,a.teamName=b.teams[0].name):
(a.teamDisplayName="",a.teamName="");q=!0;e()});setTimeout(function(){c(2)||(document.getElementById("tapicJsonpContainer").innerHTML="");f()},1E3*a.refreshRate)}}return f}},function(d,e){d.exports=function(c,a){return function(d){a("https://api.twitch.tv/kraken/chat/"+c.channel_id+"/badges",function(a){a.subscriber&&(c.subBadgeUrl=a.subscriber.image);"function"==typeof d&&d()})}}},function(d,e){d.exports=require("ws")},function(d,e,c){d.exports=function(a,d,b,f){function g(){d.send("CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership");
d.send("PASS oauth:"+a.oauth);d.send("NICK "+a.username)}function e(g){g=c(2)?g.split("\r\n"):g.data.split("\r\n");for(var e=0;e<g.length;e++){var l=g[e];"PING :tmi.twitch.tv"===l?d.send("PONG :tmi.twitch.tv"):l&&(b(l),":tmi.twitch.tv 001"===l.substring(0,18)&&"function"==typeof f&&f(a.username))}}c(2)?(d.on("open",g),d.on("message",e)):(d.onopen=g,d.onmessage=e)}},function(d,e,c){d.exports=function(a,d){function b(){c(2)?(h=new (c(10))("wss://pubsub-edge.twitch.tv"),h.on("open",f),h.on("message",
e)):(h=new WebSocket("wss://pubsub-edge.twitch.tv"),h.onopen=f,h.onmessage=e)}function f(){h.send(JSON.stringify({type:"LISTEN",data:{topics:["chat_moderator_actions."+a.id+"."+a.channel_id,"channel-bits-events-v1."+a.channel_id,"whispers."+a.id],auth_token:a.oauth}}));g()}function g(){h.send("{'type':'PING'}");setTimeout(g,12E4)}function e(a){a=c(2)?JSON.parse(a):JSON.parse(a.data);switch(a.type){case "PONG":case "RESPONSE":break;case "RECONNECT":b();break;case "MESSAGE":k(a.data);break;default:console.log("Unknown message type received in pubsub."),
console.log(a)}}function k(b){function c(){var a=JSON.parse(b.message);d("bits",a)}function f(){var a=JSON.parse(b.message).data;d("moderation",a)}switch(b.topic){case "channel-bits-events-v1."+a.channel_id:c();break;case "chat_moderator_actions."+a.id+"."+a.id:f()}}var h;b()}},function(d,e){d.exports=function(c,a,d,b,f,e){c.joinChannel=function(c,g){if("string"!=typeof c)return console.error("Invalid parameters. Usage: TAPIC.joinChannel(channel);");if(!d)return console.error("Tapic not setup.");
a.channel&&d.send("PART #"+a.channel);e("https://api.twitch.tv/kraken/users","\x26login\x3d"+c,function(e){a.channel_id=e.users[0]._id;a.channel=c.replace("#","");a.online=!1;a.game="";a.status="";a.followerCount="";a.totalViewCount="";a.partner="";a.currentViewCount="";a.fps="";a.videoHeight="";a.delay="";a.subBadgeUrl="";a.chatters={};a.followers=[];a.createdAt="";a.logo="";a.videoBanner="";a.profileBanner="";a.userMod="";a.userSub="";a.userTurbo="";a.userType="";d.send("JOIN #"+a.channel);b();
"function"==typeof g?f(g):f()})}}},function(d,e){d.exports=function(c,a,d,b){c.sendChat=function(c){if("string"!=typeof c)console.error("Invalid parameters. Usage: TAPIC.sendChat(message);");else{if(!d)return console.error("Tapic not setup.");d.send("PRIVMSG #"+a.channel+" :"+c);b("echoChat",c)}}}},function(d,e){d.exports=function(c,a,d){c.sendWhisper=function(b,c){if("string"!=typeof b||"string"!=typeof c)console.error("Invalid parameters. Usage: TAPIC.sendWhisper(user, message);");else{if(!a)return console.error("Tapic not setup.");
a.send("PRIVMSG #jtv :/w "+b+" "+c);d("echoWhisper",{to:b,text:c})}}}},function(d,e){d.exports=function(c,a){c.isFollowing=function(c,b,d){if("string"!=typeof c||"string"!=typeof b||"function"!=typeof d)return console.error("Invalid parameters. Usage: TAPIC.isFollowing(user_id, channel_id, callback);");a("https://api.twitch.tv/kraken/users/"+c+"/follows/channels/"+b,function(a){a.error?d({isFollowing:!1}):d({isFollowing:!0,dateFollowed:(new Date(a.created_at)).toLocaleString()})})}}},function(d,e){d.exports=
function(c,a,d){c.isSubscribing=function(b,c){"string"!=typeof b||"function"!=typeof c?console.error("Invalid parameters. Usage: TAPIC.isSubscribing(user_id, callback);"):d("https://api.twitch.tv/kraken/channels/"+a.channel_id+"/subscriptions/"+b,function(a){a.error?c({isSubscribing:!1}):c({isSubscribing:!0,dateSubscribed:(new Date(a.created_at)).toLocaleString()})})}}},function(d,e){d.exports=function(c,a){c.getUsername=function(){return a.username};c.getChannel=function(){return a.channel};c.getUserID=
function(){return a.id};c.getChannelID=function(){return a.channel_id};c.isOnline=function(){return a.channel?a.online:console.error("Not in a channel.")};c.getStatus=function(){return a.channel?a.status:console.error("Not in a channel.")};c.getGame=function(){return a.channel?a.game:console.error("Not in a channel.")};c.getFollowerCount=function(){return a.channel?a.followerCount:console.error("Not in a channel.")};c.getTotalViewCount=function(){return a.channel?a.totalViewCount:console.error("Not in a channel.")};
c.isPartner=function(){return a.channel?a.partner:console.error("Not in a channel.")};c.getCurrentViewCount=function(){return a.channel?a.currentViewCount:console.error("Not in a channel.")};c.getFps=function(){return a.online?a.fps:console.error("Stream not online.")};c.getVideoHeight=function(){return a.online?a.videoHeight:console.error("Stream not online.")};c.getDelay=function(){return a.online?a.delay:console.error("Stream not online.")};c.getSubBadgeUrl=function(){return a.channel?a.subBadgeUrl:
console.error("Not in a channel.")};c.getChatters=function(){return a.channel?a.chatters:console.error("Not in a channel.")};c.getCreatedAt=function(){return a.channel?a.createdAt:console.error("Not in a channel.")};c.getLogo=function(){return a.channel?a.logo:console.error("Not in a channel.")};c.getVideoBanner=function(){return a.channel?a.videoBanner:console.error("Not in a channel.")};c.getProfileBanner=function(){return a.channel?a.profileBanner:console.error("Not in a channel.")};c.getDisplayName=
function(){return a.channel?a.userDisplayName:console.error("Not in a channel.")};c.getColor=function(){return a.channel?a.userColor:console.error("Not in a channel.")};c.getEmoteSets=function(){return a.channel?a.userEmoteSets:console.error("Not in a channel.")};c.getMod=function(){return a.channel?1==a.userMod:console.error("Not in a channel.")};c.getSub=function(){return a.channel?1==a.userSub:console.error("Not in a channel.")};c.getTurbo=function(){return a.channel?1==a.userTurbo:console.error("Not in a channel.")};
c.getUserType=function(){return a.channel?a.userType:console.error("Not in a channel.")};c.getOauth=function(){return a.oauth};c.getClientID=function(){return a.clientid};c.getPreview=function(){return a.preview};c.getCommunityName=function(){return a.community.name};c.getCommunityDescription=function(){return a.community.description};c.getCommunityDescriptionHTML=function(){return a.community.descriptionHTML};c.getCommunityRules=function(){return a.community.rules};c.getCommunityRulesHTML=function(){return a.community.rulesHTML};
c.getCommunitySummary=function(){return a.community.summary};c.getTeamName=function(){return a.teamName};c.getTeamDisplayName=function(){return a.teamDisplayName}}},function(d,e,c){d.exports=function(a,d){a.runCommercial=function(a){if("number"!=typeof a)console.error("Invalid parameters. Usage: TAPIC.runCommercial(length);");else{if(!d.channel)return console.error("Not in a channel.");if(!d.partner)return console.error("Not a partner, cannot run a commercial.");var b="/kraken/channels/"+d.channel_id+
"/commercial?oauth_token\x3d"+d.oauth,e="https://api.twitch.tv"+b;c(2)?(e={host:"https://api.twitch.tv",path:b,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset\x3dUTF-8","Client-ID":d.clientid}},c(6).request(e).write({duration:a}).end()):(b=new XMLHttpRequest,b.open("POST",e,!0),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset\x3dUTF-8"),b.setRequestHeader("Client-ID",d.clientid),b.send({duration:a}))}}}},function(d,e){d.exports=function(c,
a){c.setStatusGame=function(c,b){"string"!=typeof c||"string"!=typeof b?console.error("Invalid parameters. Usage: TAPIC.setStatusGame(status, game);"):_getJSON("https://api.twitch.tv/kraken/channels/"+a.channel_id,"\x26_method\x3dput\x26channel[status]\x3d"+encodeURIComponent(c)+"\x26channel[game]\x3d"+encodeURIComponent(b),function(b){a.game=b.game;a.status=b.status})}}},function(d,e){d.exports=function(c,a,d){c.joinCommunity=function(b){function c(b){d("https://api.twitch.tv/kraken/channels/"+a.channel_id+
"/community/"+b,"\x26_method\x3dput",function(a){})}if("string"!=typeof b)return console.error("Invalid parameter. Usage: TAPIC.joinCommunity(community);");d("https://api.twitch.tv/kraken/communities/","\x26name\x3d"+b,function(a){c(a._id)})}}},function(d,e){d.exports=function(c,a,d){c.leaveCommunity=function(){d("https://api.twitch.tv/kraken/channels/"+a.channel_id+"/community/","\x26_method\x3ddelete",function(a){})}}},function(d,e){d.exports=function(c,a){c.findID=function(c,b){if("string"!=typeof c||
"function"!=typeof b)return console.error("Invalid parameters. Usage: TAPIC.findID(username, callback);");a("https://api.twitch.tv/kraken/users","\x26login\x3d"+c,function(a){b(a.users[0]._id)})}}},function(d,e){d.exports=function(c,a){c.setRefreshRate=function(c){if("number"!=typeof c)return console.error("Invalid parameter. Usage: TAPIC.setRefreshRate(refreshRate);");5<=c&&(a.refreshRate=c)}}},function(d,e){d.exports=function(c,a){c.kraken=function(c,b,d){if("string"===typeof c&&"string"===typeof b&&
"function"===typeof d)a("https://api.twitch.tv/kraken/"+c,b,function(a){d(a)});else if("string"===typeof c&&"function"===typeof b)a("https://api.twitch.tv/kraken/"+c,function(a){b(a)});else return console.error("Invalid parameters. Usage: TAPIC.kraken(path, [params,] callback);")}}},function(d,e){}]);