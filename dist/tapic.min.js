
/**
* Twitch API & Chat in javascript.
* @author Skhmt
* @license MIT
* @version 5.1.4
*
* @module TAPIC
*/

/* jshint
  esversion: 6,
  node: true
*/

var __nodeModule__;
if (typeof module == 'object') __nodeModule__ = module;

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var d={},f=Object.create(new $jscomp.global.Proxy(d,{get:function(c,a,e){return c==d&&"q"==a&&e==f}}));return!0===f.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,f,c){d!=Array.prototype&&d!=Object.prototype&&(d[f]=c.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var d=0;return function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+d++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var f=0;return $jscomp.iteratorPrototype(function(){return f<d.length?{done:!1,value:d[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();var f=d[Symbol.iterator];return f?f.call(d):$jscomp.arrayIterator(d)};$jscomp.owns=function(d,f){return Object.prototype.hasOwnProperty.call(d,f)};
$jscomp.polyfill=function(d,f,c,a){if(f){c=$jscomp.global;d=d.split(".");for(a=0;a<d.length-1;a++){var e=d[a];e in c||(c[e]={});c=c[e]}d=d[d.length-1];a=c[d];f=f(a);f!=a&&null!=f&&$jscomp.defineProperty(c,d,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("WeakMap",function(d){function f(){if(!d||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),c=new d([[a,2],[b,3]]);if(2!=c.get(a)||3!=c.get(b))return!1;c.delete(a);c.set(b,4);return!c.has(a)&&4==c.get(b)}catch(k){return!1}}function c(a){$jscomp.owns(a,e)||$jscomp.defineProperty(a,e,{value:{}})}function a(a){var b=Object[a];b&&(Object[a]=function(a){c(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(d&&$jscomp.ES6_CONFORMANCE)return d}else if(f())return d;
var e="$jscomp_hidden_"+Math.random();a("freeze");a("preventExtensions");a("seal");var b=0,g=function(a){this.id_=(b+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};g.prototype.set=function(a,b){c(a);if(!$jscomp.owns(a,e))throw Error("WeakMap key fail: "+a);a[e][this.id_]=b;return this};g.prototype.get=function(a){return $jscomp.owns(a,e)?a[e][this.id_]:void 0};g.prototype.has=
function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)};g.prototype.delete=function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)?delete a[e][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(d){function f(){if($jscomp.ASSUME_NO_NATIVE_MAP||!d||"function"!=typeof d||!d.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new d($jscomp.makeIterator([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var c=b.entries(),e=c.next();if(e.done||e.value[0]!=a||"s"!=e.value[1])return!1;e=c.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!c.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(d&&$jscomp.ES6_CONFORMANCE)return d}else if(f())return d;$jscomp.initSymbol();$jscomp.initSymbolIterator();var c=new WeakMap,a=function(a){this.data_={};this.head_=g();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};a.prototype.set=function(a,b){a=0===a?0:a;var c=e(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};a.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};a.prototype.has=function(a){return!!e(this,a).entry};
a.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};a.prototype.entries=function(){return b(this,function(a){return[a.key,a.value]})};a.prototype.keys=function(){return b(this,function(a){return a.key})};a.prototype.values=function(){return b(this,function(a){return a.value})};a.prototype.forEach=function(a,b){for(var c=this.entries(),e;!(e=c.next()).done;)e=e.value,a.call(b,e[1],e[0],this)};a.prototype[Symbol.iterator]=a.prototype.entries;var e=function(a,b){var e=b&&typeof b;"object"==
e||"function"==e?c.has(b)?e=c.get(b):(e=""+ ++m,c.set(b,e)):e="p_"+b;var g=a.data_[e];if(g&&$jscomp.owns(a.data_,e))for(a=0;a<g.length;a++){var d=g[a];if(b!==b&&d.key!==d.key||b===d.key)return{id:e,list:g,index:a,entry:d}}return{id:e,list:g,index:-1,entry:void 0}},b=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=
a.next=a.head=a},m=0;return a},"es6","es3");
(function(d){function f(a){if(c[a])return c[a].exports;var e=c[a]={exports:{},id:a,loaded:!1};d[a].call(e.exports,e,e.exports,f);e.loaded=!0;return e.exports}var c={};f.m=d;f.c=c;f.p="";return f(0)})([function(d,f,c){d.exports=c(1)},function(d,f,c){function a(){var a={},b=c(3),g,d=c(4)(a),f=c(5)(b),l=c(7)(b,d),k=c(8)(b,d,f),n=c(9)(b,f);a.setup=function(e,m){"string"!==typeof e||0===e.length?console.error("Invalid parameters. Usage: TAPIC.setup(oauth[, callback]);"):(b.oauth=e.replace("oauth:",""),
b.startTime=Date.now(),f("https://api.twitch.tv/kraken",function(e){e.error&&"Bad Request"===e.error?console.error("Invalid Client ID or Oauth token."):(b.username=e.token.user_name,b.id=e.token.user_id,b.clientid=e.token.client_id,g=c(2)?new (c(10))("wss://irc-ws.chat.twitch.tv:443"):new WebSocket("wss://irc-ws.chat.twitch.tv:443"),c(11)(b,g,l,d,m),c(12)(b,d),c(13)(a,b,g,n,k,f),c(14)(a,b,g,d),c(15)(a,g,d),c(16)(a,f),c(17)(a,b,f),c(18)(a,b),c(19)(a,b),c(20)(a,b,f),c(21)(a,b,f),c(22)(a,b,f),c(23)(a,
f),c(24)(a,b),c(25)(a,f),c(26)(a,b))}))};c(27);return a}c(2)?__nodeModule__.exports=a():window.TAPIC=a()},function(d,f){d.exports="object"!==typeof window||"object"===typeof nw},function(d,f){d.exports={refreshRate:5,clientid:"",oauth:"",username:"",channel:"",channel_id:"",id:"",online:"",game:"",status:"",followerCount:"",totalViewCount:"",currentViewCount:"",partner:"",fps:"",videoHeight:"",delay:"",preview:"",subBadgeUrl:"",chatters:{},followers:{},createdAt:"",logo:"",videoBanner:"",profileBanner:"",
userDisplayName:"",userColor:"",userEmoteSets:"",userMod:"",userSub:"",userTurbo:"",userType:"",community:{name:"",description:"",descriptionHTML:"",rules:"",rulesHTML:"",summary:""},teamDisplayName:"",teamName:"",startTime:0}},function(d,f){d.exports=function(c){function a(a,c){if(e.has(a)){a=e.get(a);for(var b=0;b<a.length;b++)a[b](c)}}var e=new Map;c.listen=function(a,c){if("string"!=typeof a)console.error("Invalid parameters. Usage: TAPIC.listen(eventName[, callback]);");else{if("function"!==
typeof c)return console.error("Callback needed.");if(e.has(a)){var b=e.get(a);b.push(c);e.set(a,b)}else e.set(a,[c])}};c.emit=function(b,c){"string"!=typeof b?console.error("Invalid parameters. Usage: TAPIC.emit(eventName, eventDetail);"):a(b,c)};return a}},function(d,f,c){d.exports=function(a){return function(e,b,d){var g=setTimeout(function(){return d({error:"Request timeout after 5 seconds."})},5E3),f=e+("?oauth_token\x3d"+a.oauth)+"\x26api_version\x3d5";a.clientid&&(f+="\x26client_id\x3d"+a.clientid);
"string"===typeof b?f+=b:"function"===typeof b&&(d=b);if("function"!==typeof d)return console.error("Callback needed.");if(c(2))c(6).get(f,function(a){var b="";a.setEncoding("utf8");a.on("data",function(a){b+=a});a.on("end",function(){if(204===a.statusCode)return clearTimeout(g),d(b);if(200<=a.statusCode&&400>a.statusCode)try{return clearTimeout(g),d(JSON.parse(b))}catch(p){return clearTimeout(g),console.error(p+"@"+e)}else return clearTimeout(g),console.error(b+"@"+e)})}).on("error",function(a){clearTimeout(g);
return console.error(a.message+"@"+e)});else{do var l="tapicJSONP"+Math.floor(1E9*Math.random());while(window[l]);window[l]=function(a){clearTimeout(g);delete window[l];return d(a)};b=document.createElement("script");b.id=l;b.src=f+"\x26callback\x3d"+l;b.onerror=function(a){};try{document.getElementById("tapicJsonpContainer").appendChild(b)}catch(k){f=document.createElement("div"),f.id="tapicJsonpContainer",f.style.cssText="display:none;",document.getElementsByTagName("body")[0].appendChild(f),f.appendChild(b)}}}}},
function(d,f){d.exports=require("https")},function(d,f){d.exports=function(c,a){function e(a){var b=new Map;a=a.substring(1).split(";");for(var c=0;c<a.length;c++){var e=a[c].split("\x3d");b.set(e[0],e[1])}b.has("badges")&&(a=b.get("badges"),b.set("badges",a.split(",")));return b}return function(b){a("raw",b);var d=b.split(" ");if("PRIVMSG"===d[2]){b=e(d[0]);b.get("display-name")||b.set("display-name",d[1].split("!")[0].substring(1));b.get("color")||b.set("color","#d2691e");var f=!1;d=d.slice(4);
d[0]=d[0].substring(1);"\u0001ACTION"===d[0]&&(d=d.slice(1),f=!0);d=d.join(" ").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");a("message",{from:b.get("display-name"),color:b.get("color"),mod:-1!==b.get("badges").join(" ").indexOf("admin")||-1!==b.get("badges").join(" ").indexOf("broadcaster")||-1!==b.get("badges").join(" ").indexOf("global_mod")||-1!==b.get("badges").join(" ").indexOf("moderator")||-1!==b.get("badges").join(" ").indexOf("staff"),sub:-1!==b.get("badges").join(" ").indexOf("subscriber")||
-1!==b.get("badges").join(" ").indexOf("founder"),founder:-1!==b.get("badges").join(" ").indexOf("founder"),turbo:-1!==b.get("badges").join(" ").indexOf("turbo"),streamer:b.get("display-name").toLowerCase()===c.channel.toLowerCase(),action:f,text:d,emotes:b.get("emotes"),badges:b.get("badges"),room_id:b.get("room-id"),user_id:b.get("user-id"),bits:b.get("bits")})}else if("PRIVMSG"===d[1])a("host",d[3].substring(1));else if("NOTICE"===d[2])d.splice(0,4),b=d.join(" ").substring(1),a("notice",b);else if("JOIN"===
d[1])b=d[0].split("!")[0].substring(1),a("join",b);else if("PART"===d[1])b=d[0].split("!")[0].substring(1),a("part",b);else if("ROOMSTATE"===d[2])b=e(d[0]),a("roomstate",{lang:b.get("broadcaster-lang"),r9k:b.get("r9k"),slow:b.get("slow"),subs_only:b.get("subs-only")});else if("WHISPER"===d[2])b=e(d[0]),b.get("display-name")||b.set("display-name",d[1].split("!")[0].substring(1)),b.get("color")||b.set("color","#d2691e"),f=d.slice(4).join(" ").substring(1),a("whisper",{from:b.get("display-name"),to:d[3],
color:b.get("color"),emotes:b.get("emotes"),turbo:1==b.get("turbo"),message_id:b.get("message-id"),thread_id:b.get("thread-id"),user_id:b.get("user-id"),text:f,badges:b.get("badges")});else if("CLEARCHAT"===d[2])3===d.length?a("clearChat"):(f=e(d[0]),b=f.get("ban-reason"),"string"===typeof b&&(b=b.replace(/\\s/g," ")),f=f.get("ban-duration"),"undefined"===typeof f&&(f=0),a("clearUser",{name:d[4].slice(1),reason:b,duration:f}));else if("USERSTATE"===d[2])b=e(d[0]),c.userColor=b.get("color"),c.userDisplayName=
b.get("display-name"),c.userEmoteSets=b.get("emote-sets"),c.userMod=b.get("mod"),c.userSub=b.get("subscriber"),c.userTurbo=b.get("turbo"),c.userType=b.get("user-type");else if("USERNOTICE"===d[2]){b=e(d[0]);d=d.slice(4).join(" ").substring(1);f=b.get("msg-param-months");var q=b.get("display-name"),l="resub"==b.get("msg-id"),k=b.get("msg-param-sub-plan"),n=b.get("msg-param-sub-plan-name"),p=b.get("system-msg"),r=b.get("user-id"),h=b.get("user-type");b=b.get("room-id");a("sub",{name:q,user_id:r,user_type:h,
room_id:b,months:f,resub:l,plan:k,planName:n,sysMsg:p,joinedText:d})}}}},function(d,f,c){d.exports=function(a,d,b){function e(f){function g(){m&&k&&n&&("function"===typeof f&&f(),d("update"))}if(a.channel_id){var m=!1,k=!1,n=!1;b("https://api.twitch.tv/kraken/streams/"+a.channel_id,function(b){b.stream?(a.online=!0,a.currentViewCount=b.stream.viewers,a.fps=b.stream.average_fps,a.videoHeight=b.stream.video_height,a.delay=b.stream.delay,a.preview=b.stream.preview.large):a.online=!1;m=!0;g()});b("https://api.twitch.tv/kraken/channels/"+
a.channel_id,function(b){a.game=b.game;a.status=b.status;a.followerCount=b.followers;a.totalViewCount=b.views;a.partner=b.partner;a.createdAt=b.created_at;a.logo=b.logo;a.videoBanner=b.video_banner;a.profileBanner=b.profile_banner;k=!0;g()});a.community.name="";a.community.description="";a.community.descriptionHTML="";a.community.rules="";a.community.rulesHTML="";a.community.summary="";b("https://api.twitch.tv/kraken/channels/"+a.channel_id+"/follows","\x26limit\x3d100",function(b){if(b.follows){var c=
!0;0<a.followers.length&&(c=!1);for(var e=0;e<b.follows.length;e++){var f=b.follows[e].user.display_name;-1===a.followers.indexOf(f)&&(c||d("follow",f),a.followers.push(f))}n=!0;g()}});setTimeout(function(){c(2)||(document.getElementById("tapicJsonpContainer").innerHTML="");e()},1E3*a.refreshRate)}}return e}},function(d,f){d.exports=function(c,a){return function(d){a("https://api.twitch.tv/kraken/chat/"+c.channel_id+"/badges",function(a){a.subscriber&&(c.subBadgeUrl=a.subscriber.image);"function"==
typeof d&&d()})}}},function(d,f){d.exports=require("ws")},function(d,f,c){d.exports=function(a,d,b,f,m){function e(){f("dev","chat - connected successfully");d.send("CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership");d.send("PASS oauth:"+a.oauth);d.send("NICK "+a.username)}function g(e){e=c(2)?e.split("\r\n"):e.data.split("\r\n");for(var g=0;g<e.length;g++){var k=e[g];"PING :tmi.twitch.tv"===k?(f("dev","chat - PONG sent"),d.send("PONG :tmi.twitch.tv")):k&&(b(k),":tmi.twitch.tv 001"===
k.substring(0,18)&&"function"==typeof m&&m(a.username))}}c(2)?(d.on("open",e),d.on("message",g)):(d.onopen=e,d.onmessage=g)}},function(d,f,c){d.exports=function(a,d){function b(){clearTimeout(u);clearTimeout(t);"object"!==typeof h||1!==h.readyState&&0!==h.readyState||n();c(2)?(h=new (c(10))("wss://pubsub-edge.twitch.tv"),h.on("open",e),h.on("message",p),h.on("close",f),h.on("error",q)):(h=new WebSocket("wss://pubsub-edge.twitch.tv"),h.onopen=e,h.onmessage=p,h.onclose=f,h.onerror=q)}function e(){d("dev",
"pubsub - connected successfully");k(JSON.stringify({type:"LISTEN",nonce:"listenToTopics",data:{topics:["channel-bits-events-v1."+a.channel_id,"chat_moderator_actions."+a.id+"."+a.channel_id,"whispers."+a.id],auth_token:a.oauth}}));l()}function f(){d("dev","pubsub - reconnect: psClose()");b()}function q(a){console.error("pubsub error");console.error(a)}function l(){k('{"type":"PING"}');d("dev","pubsub - PING sent");u=setTimeout(l,6E4);t=setTimeout(function(){d("dev","pubsub - reconnect: ping() - pong timeout");
b()},1E4)}function k(a){switch(h.readyState){case 0:setTimeout(function(){k(a)},1E3);break;case 2:case 3:d("dev","pubsub - reconnect: send() - closing/closed state");b();setTimeout(function(){k(a)},2E3);break;case 1:try{h.send(a)}catch(v){console.error(v),setTimeout(function(){k(a)},1500)}}}function n(){if(c(2))h.on("close",function(){});else h.onclose=function(){};h.close()}function p(a){a=c(2)?JSON.parse(a):JSON.parse(a.data);switch(a.type){case "PONG":d("dev","pubsub - PONG received");clearTimeout(t);
break;case "RESPONSE":break;case "RECONNECT":d("dev","pubsub - reconnect: psMessage() - was sent RECONNECT message");b();break;case "MESSAGE":r(a.data);break;default:d("dev","pubsub uncaught message type:"+a)}}function r(b){function c(){var a=JSON.parse(b.message);d("bits",a)}function e(){var a=JSON.parse(b.message).data;d("moderation",a)}switch(b.topic){case "channel-bits-events-v1."+a.channel_id:c();break;case "chat_moderator_actions."+a.id+"."+a.id:e();break;case "whispers."+a.id:JSON.parse(b.message)}}
var h,t,u;b()}},function(d,f){d.exports=function(c,a,d,b,f,m){c.joinChannel=function(c,e){if("string"!=typeof c)return console.error("Invalid parameters. Usage: TAPIC.joinChannel(channel);");if(!d)return console.error("Tapic not setup.");a.channel&&d.send("PART #"+a.channel);m("https://api.twitch.tv/kraken/users","\x26login\x3d"+encodeURIComponent(c),function(g){a.channel_id=g.users[0]._id;a.channel=c.replace("#","");a.online=!1;a.game="";a.status="";a.followerCount="";a.totalViewCount="";a.partner=
"";a.currentViewCount="";a.fps="";a.videoHeight="";a.delay="";a.subBadgeUrl="";a.chatters={};a.followers=[];a.createdAt="";a.logo="";a.videoBanner="";a.profileBanner="";a.userMod="";a.userSub="";a.userTurbo="";a.userType="";d.send("JOIN #"+a.channel);b();"function"==typeof e?f(e):f()})}}},function(d,f){d.exports=function(c,a,d,b){c.sendChat=function(c){if("string"!=typeof c)console.error("Invalid parameters. Usage: TAPIC.sendChat(message);");else{if(!d)return console.error("Tapic not setup.");d.send("PRIVMSG #"+
a.channel+" :"+c);b("echoChat",c)}}}},function(d,f){d.exports=function(c,a,d){c.sendWhisper=function(b,c){if("string"!=typeof b||"string"!=typeof c)console.error("Invalid parameters. Usage: TAPIC.sendWhisper(user, message);");else{if(!a)return console.error("Tapic not setup.");a.send("PRIVMSG #jtv :/w "+b+" "+c);d("echoWhisper",{to:b,text:c})}}}},function(d,f){d.exports=function(c,a){c.isFollowing=function(c,b,d){if("string"!=typeof c||"string"!=typeof b||"function"!=typeof d)return console.error("Invalid parameters. Usage: TAPIC.isFollowing(user_id, channel_id, callback);");
c="https://api.twitch.tv/kraken/users/"+encodeURIComponent(c)+"/follows/channels/"+encodeURIComponent(b);a(c,function(a){a&&a.created_at?d({isFollowing:!0,dateFollowed:(new Date(a.created_at)).toLocaleString()}):d({isFollowing:!1})})}}},function(d,f){d.exports=function(c,a,d){c.isSubscribing=function(b,c){"string"!=typeof b||"function"!=typeof c?console.error("Invalid parameters. Usage: TAPIC.isSubscribing(user_id, callback);"):(b="https://api.twitch.tv/kraken/channels/"+a.channel_id+"/subscriptions/"+
encodeURIComponent(b),d(b,function(a){a.error?c({isSubscribing:!1}):c({isSubscribing:!0,dateSubscribed:(new Date(a.created_at)).toLocaleString(),sub_plan:a.sub_plan,sub_plan_name:a.sub_plan_name})}))}}},function(d,f){d.exports=function(c,a){c.getUsername=function(){return a.username};c.getChannel=function(){return a.channel};c.getUserID=function(){return a.id};c.getChannelID=function(){return a.channel_id};c.isOnline=function(){return a.channel?a.online:console.error("Not in a channel.")};c.getStatus=
function(){return a.channel?a.status:console.error("Not in a channel.")};c.getGame=function(){return a.channel?a.game:console.error("Not in a channel.")};c.getFollowerCount=function(){return a.channel?a.followerCount:console.error("Not in a channel.")};c.getTotalViewCount=function(){return a.channel?a.totalViewCount:console.error("Not in a channel.")};c.isPartner=function(){return a.channel?a.partner:console.error("Not in a channel.")};c.getCurrentViewCount=function(){return a.channel?a.currentViewCount:
console.error("Not in a channel.")};c.getFps=function(){return a.online?a.fps:console.error("Stream not online.")};c.getVideoHeight=function(){return a.online?a.videoHeight:console.error("Stream not online.")};c.getDelay=function(){return a.online?a.delay:console.error("Stream not online.")};c.getSubBadgeUrl=function(){return a.channel?a.subBadgeUrl:console.error("Not in a channel.")};c.getChatters=function(){return{moderators:[],staff:[],admins:[],global_mods:[],viewers:[]}};c.getCreatedAt=function(){return a.channel?
a.createdAt:console.error("Not in a channel.")};c.getLogo=function(){return a.channel?a.logo:console.error("Not in a channel.")};c.getVideoBanner=function(){return a.channel?a.videoBanner:console.error("Not in a channel.")};c.getProfileBanner=function(){return a.channel?a.profileBanner:console.error("Not in a channel.")};c.getDisplayName=function(){return a.channel?a.userDisplayName:console.error("Not in a channel.")};c.getColor=function(){return a.channel?a.userColor:console.error("Not in a channel.")};
c.getEmoteSets=function(){return a.channel?a.userEmoteSets:console.error("Not in a channel.")};c.getMod=function(){return a.channel?1==a.userMod:console.error("Not in a channel.")};c.getSub=function(){return a.channel?1==a.userSub:console.error("Not in a channel.")};c.getTurbo=function(){return a.channel?1==a.userTurbo:console.error("Not in a channel.")};c.getUserType=function(){return a.channel?a.userType:console.error("Not in a channel.")};c.getOauth=function(){return a.oauth};c.getClientID=function(){return a.clientid};
c.getPreview=function(){return a.preview};c.getCommunityName=function(){return a.community.name};c.getCommunityDescription=function(){return a.community.description};c.getCommunityDescriptionHTML=function(){return a.community.descriptionHTML};c.getCommunityRules=function(){return a.community.rules};c.getCommunityRulesHTML=function(){return a.community.rulesHTML};c.getCommunitySummary=function(){return a.community.summary};c.getTeamName=function(){return a.teamName};c.getTeamDisplayName=function(){return a.teamDisplayName}}},
function(d,f,c){d.exports=function(a,d){a.runCommercial=function(a){if("number"!=typeof a)console.error("Invalid parameters. Usage: TAPIC.runCommercial(length);");else{if(!d.channel)return console.error("Not in a channel.");if(!d.partner)return console.error("Not a partner, cannot run a commercial.");var b="/kraken/channels/"+d.channel_id+"/commercial?oauth_token\x3d"+d.oauth,e="https://api.twitch.tv"+b;c(2)?(e={host:"https://api.twitch.tv",path:b,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset\x3dUTF-8",
"Client-ID":d.clientid}},c(6).request(e).write({duration:a}).end()):(b=new XMLHttpRequest,b.open("POST",e,!0),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset\x3dUTF-8"),b.setRequestHeader("Client-ID",d.clientid),b.send({duration:a}))}}}},function(d,f){d.exports=function(c,a,d){c.setStatusGame=function(b,c){"string"!=typeof b||"string"!=typeof c?console.error("Invalid parameters. Usage: TAPIC.setStatusGame(status, game);"):d("https://api.twitch.tv/kraken/channels/"+a.channel_id,
"\x26_method\x3dput\x26channel[status]\x3d"+encodeURIComponent(b)+"\x26channel[game]\x3d"+encodeURIComponent(c),function(b){a.game=b.game;a.status=b.status})}}},function(d,f){d.exports=function(c,a,d){c.joinCommunity=function(a){if("string"!=typeof a)return console.error("Invalid parameter. Usage: TAPIC.joinCommunity(community);");d("https://api.twitch.tv/kraken/communities/","\x26name\x3d"+encodeURIComponent(a),function(a){})}}},function(d,f){d.exports=function(c,a,d){c.leaveCommunity=function(){}}},
function(d,f){d.exports=function(c,a){c.findID=function(c,b){if("string"!=typeof c||"function"!=typeof b)return console.error("Invalid parameters. Usage: TAPIC.findID(username, callback);");a("https://api.twitch.tv/kraken/users","\x26login\x3d"+encodeURIComponent(c),function(a){b(a.users[0]._id)})}}},function(d,f){d.exports=function(c,a){c.setRefreshRate=function(c){if("number"!=typeof c)return console.error("Invalid parameter. Usage: TAPIC.setRefreshRate(refreshRate);");5<=c&&(a.refreshRate=c)}}},
function(d,f){d.exports=function(c,a){c.kraken=function(c,b,d){if("string"===typeof c&&"string"===typeof b&&"function"===typeof d)a("https://api.twitch.tv/kraken/"+c,b,function(a){d(a)});else if("string"===typeof c&&"function"===typeof b)a("https://api.twitch.tv/kraken/"+c,function(a){b(a)});else return console.error("Invalid parameters. Usage: TAPIC.kraken(path, [params,] callback);")}}},function(d,f){d.exports=function(c,a){c.getTapicUptime=function(){var c=Date.now()-a.startTime,b=c/1E3,d=b/60;
return{total:c,seconds:b%60|0,minutes:d%60|0,hours:d/60|0}}}},function(d,f){}]);